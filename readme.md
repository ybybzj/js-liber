shared utilities for client and server
